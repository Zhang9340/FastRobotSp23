<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="Lab5" content="">
    <meta name="Zhiyuan" content="">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Lab5</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <!--            <li class="index.html"><a href="#">Home</a></li>-->
                <!--            <li><a href="#intro">Introduction</a></li>-->
                <!--            <li><a href="#obj">Project Objective</a></li>-->
                <!--            <li><a href="#design">Procedure and Result</a></li>-->
                <!--            <li><a href="#drawings">Drawings</a></li>-->
                <!--            <li><a href="#testing">Testing</a></li>-->
                <!--            <li><a href="#result">Result</a></li>-->
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container">

    <div class="starter-template">
        <h1>Lab 5: Motors and Open Loop Control </h1>
        <h4>Zhiyuan Zhang</h4>


    </div>

    <!--      <hr>-->
    <!--      <div class="center-block">-->
    <!--          <iframe width="640" height="360" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>-->
    <!--          <h4 style="text-align:center;">Demonstration Video</h4>-->
    <!--      </div>-->

    <hr id="intro">

    <div style="text-align:center;">
        <h2>Introduction</h2>
        <p style="text-align: left;padding: 0px 30px;"> The aim of this laboratory exercise is to
            control the motor by using open loop control. By the end of the lab, the car
            should be capable of performing a predetermined sequence of actions by utilizing the Artemis board and two
            dual motor drivers. </p>

        <hr id='obj'>

        <!--      <div class="row">-->
        <!--          <div class="col-md-4" style="text-align:center;">-->
        <!--          <img class="img-rounded" src="pics/1.jpg" alt="Generic placeholder image" width="240" height="240">-->
        <!--          </div>-->
        <!--          <div class="col-md-8" style="font-size:18px;">-->
        <!--          <h2>Project Objective:</h2>-->
        <!--          <ul>-->
        <!--              <li>some important objectives.some important objectives.some important objectives.some important objectives.</li>-->
        <!--                <li>some other important objectives.</li>-->
        <!--            <li>some not-that-important objectives.</li>-->
        <!--          </ul>-->
        <!--          </div>-->
        <!--      </div>-->

        <!--    <hr id='design'>-->

        <div style="text-align:center;">
            <h2>Lab Procedure And Result</h2>
            <h3>1. PreLab</h3>
            <p style="text-align: left;padding: 0px 30px;">
                a) The illustration presented beneath depicts the manner in which I ultimately linked all of the
                components together, which encompassed the Artemis, two motor drivers, motors, and batteries.
            </p>
            <img src="pics/prelab.jpg" width="400">
            <p style="text-align: left;padding: 0px 30px;">
                As the Artemis necessitates significantly less current to operate than the motors, two distinct
                batteries were utilized to power each component. To elaborate, the motors that consume more power are
                powered by a battery with a higher energy capacity of 3.7V and 850mAh. Conversely, the Artemis is
                powered by a 3.7V and 650mAh battery due to its lower power requirements.

            </p>


            <h3>2.Single Dual Motor Driver</h3>

            <p style="text-align: left;padding: 0px 30px;"> For one motor driver ,I connect the BIN1 and BIN2 to A0 and
                A1 respectively ,using the power supply to power the motor driver. I then used the code below to
                generate the PWM for the driver</p>
            <img src="pics/code%20for%20one.jpg" width="400">
            <p style="text-align: left;padding: 0px 30px;"> The voltage supply I set up is 3.7v ,and I measured the pwm
                signal from the BOUT2 pin.The Setting and the result is shown below:</p>
            <img src="pics/setting.jpg" width="400">
            <img src="pics/result.jpg" width="400">
            <h3>3.Spinning Wheels</h3>

            <p style="text-align: left;padding: 0px 30px;">Once I confirmed the correctness of the connections and
                outputs, I dismantled the car and connect the motor drivers as shown in the prelab connection diagram,
                The code snippet I used is shown below: </p>
            <img src="pics/oneside.png" width="400">
            <p style="text-align: left;padding: 0px 30px;">The result is shown in the video
                below: </p>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/rW0014C3y28"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>


            <p style="text-align: left;padding: 0px 30px;">Similar to the one side motor spinning , I used the code
                below to run the both side motors </p>
            <img src="pics/doubleside.png" width="400">
            <p style="text-align: left;padding: 0px 30px;">The video below shows powered by batteries, both sides of
                wheels spin as the code defines. </p>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/ZauhI7qgcsc"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>

            <p style="text-align: left;padding: 0px 30px;">Once I had verified that both motor drivers were functioning
                correctly, I proceeded to incorporate the various components from previous labs, such as the IMU and ToF
                sensors, into the car's system. The accompanying image illustrates the final configuration of these
                components within the car. </p>
            <img src="pics/finished.jpg" width="400">
            <h3>3.Lower Limit PWM Values</h3>
            <p style="text-align: left;padding: 0px 30px;"> After conducting numerous experiments, I discovered that to
                enable my robot to move forward from a stationary position on the floor, the PWM must be
                set to at least 40 . This value is necessary to provide the motors with enough power to initiate
                movement. The vide is shown below:</p>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/HrM0-7QbXMk"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>

            <p style="text-align: left;padding: 0px 30px;">To find minimum pwm for a turn, the pwm for the left is
                50 and 30 for the right motor</p>
            <h3> 4.Straight line Calibration</h3>
            <p style="text-align: left;padding: 0px 30px;">
                As I set the right and left motors to the same pwm,I found that my robot goes towards the left.
                Therefore
                , I decreased the duty cycle of the right motor to 58% of the counterpart of the left motor, The code
                below
                is used to run a straight line.
            </p>
            <img src="pics/straight.png" width="400">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/gjjxzp_6IHk"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>

            <h3>5.Open loop</h3>
            <p style="text-align: left;padding: 0px 30px;">
                Below is the code I employed to execute the open loop. Initially, the robot will move forward for a
                duration of 2 seconds, followed by a 1-second halt. Subsequently, it will travel in reverse before
                ultimately executing a turn. </p>
            <img src="pics/openloop.png" width="400">
            <p style="text-align: left;padding: 0px 30px;">
                The result for open loop test is shown in the video below: </p>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/rU82eHCHM2g"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>


            <h3> 6.AnalogWrite frequency discussion</h3>
            <img src="pics/result.jpg" width="400">
            <p style="text-align: left;padding: 0px 30px;">
                As shown from the oscilloscope ,the frequency is 183.1 Hz .And from the data sheet,the frequency is
                490Hz, In my opinion, the current PWM frequency is sufficient. However, increasing it could offer the
                advantage of more precise control over the motor, resulting in a more rapid response.</p>


            <h3>7.Lowest PWM value speed (once in motion) </h3>

            <p style="text-align: left;padding: 0px 30px;">
                Similar to the test Lowest PWM value speed in section 4, I gave the robot a initial speed and then let
                it run on its own.I found that the lowest PWM is 37 for both left and right motors, The video below
                shows the result:</p>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/O65JWnuZzoY"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
        </div>

    </div>

</div><!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="dist/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
</body>
</html>
