
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="Lab2" content="">
    <meta name="Zhiyuan" content="">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Lab2</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
<!--            <li class="index.html"><a href="#">Home</a></li>-->
<!--            <li><a href="#intro">Introduction</a></li>-->
<!--            <li><a href="#obj">Project Objective</a></li>-->
<!--            <li><a href="#design">Procedure and Result</a></li>-->
<!--            <li><a href="#drawings">Drawings</a></li>-->
<!--            <li><a href="#testing">Testing</a></li>-->
<!--            <li><a href="#result">Result</a></li>-->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="starter-template">
        <h1>Lab 2: Bluetooth</h1>
        <h4>Zhiyuan Zhang</h4>


      </div>

<!--      <hr>-->
<!--      <div class="center-block">-->
<!--          <iframe width="640" height="360" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>-->
<!--          <h4 style="text-align:center;">Demonstration Video</h4>-->
<!--      </div>-->

      <hr id="intro">

      <div style="text-align:center;">
              <h2>Introduction</h2>
              <p style="text-align: left;padding: 0px 30px;"> The objective of this laboratory is to create a means of communication between computer and the Artemis board utilizing Bluetooth. To accomplish this, we will be utilizing the Arduino programming language on the Artemis board and Python inside a Jupyter notebook on the computer end. Additionally, we will establish framework for transmitting data over Bluetooth.</p>
      </div>

    <hr id='obj'>

<!--      <div class="row">-->
<!--          <div class="col-md-4" style="text-align:center;">-->
<!--          <img class="img-rounded" src="pics/1.jpg" alt="Generic placeholder image" width="240" height="240">-->
<!--          </div>-->
<!--          <div class="col-md-8" style="font-size:18px;">-->
<!--          <h2>Project Objective:</h2>-->
<!--          <ul>-->
<!--              <li>some important objectives.some important objectives.some important objectives.some important objectives.</li>-->
<!--                <li>some other important objectives.</li>-->
<!--            <li>some not-that-important objectives.</li>-->
<!--          </ul>-->
<!--          </div>-->
<!--      </div>-->

<!--    <hr id='design'>-->

      <div style="text-align:center;">
          <h2>Lab Procedure And Result</h2>
          <h3>1. Prelab</h3>
        <p style="text-align: left;padding: 0px 30px;">After following the step to install the python, virtual environment and required package, we can use the virtual environment and Jupyter lab server by the following commands in the terminal under the project directory .\venv\Scripts\activate and jupyter lab. Those processes are the setup for the computer end.
          As for the Artemis Board Setup, we run the sketch code ble_arduino.ino and get the mac address. The result is shown in the figure below:
        </p>
        <img src="pics/prelab.jpg"width="400">

        <p  style="text-align: left;padding: 0px 30px;">The codebase has two directories: ble_ardunio and ble_python. The ble.ardunio contains ble_ardunio.io is the main code that the Artemis Board will run, along with three class definition files that support sending messages to the computer and receiving the commands from the computer. The ble_python contains the demo.ipynb which is the main Jupyter Notebook we run. Other files contain functions that allow the computer to send commands and receive messages from the board. </p>

          <h3>2. Configurations</h3>
             <p style="text-align: left;padding: 0px 30px;">  To connect the board to the computer, generating new UUID BLE_UUID_TEST_SERVICE and the UUIDS for BLE_UUID_RX_STRING, BLE_UUID_TX_FLOAT  and BLE_UUID_TX_STRING by using the function uuid4().   After changing UUIDS for the board, It is also required to change the mac address and UUIDs for corresponding characteristics in the connection,yaml. The result is shown below:</p>
         <img src="pics/yaml.jpg"width="400">

        <img src="pics/uuid.jpg"width="400">

        <p style="text-align: left;padding: 0px 30px;">The video below shows that the demo.ipynb ar able to run all the cell after configuration:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/aDp9y3EL5yo?controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        <h3>3. Send Echo Command</h3>
        <p style="text-align: left;padding: 0px 30px;">The purpose of the Echo function is to receive a string from the computer on the Artemis board and then respond with an enhanced string that is printed on both the computer side and the Artemis Serial Monitor. This is demonstrated in the video below. </p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/z4g6UNow6qs?controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

        <p style="text-align: left;padding: 0px 30px;"> The code in the ble_arduino is shown below:</p>
        <img src="pics/echo.jpg"width="400">


        <h3>4. Get Time Command</h3>
             <p style="text-align: left;padding: 0px 30px;">The second task is to send a GET_TIME_MILLIS command to the Artemis board and obtain a string characteristic such as "T:87373", as illustrated in the video. In addition to the functions provided by the Estring class, the millis() function is used to obtain the current time </p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/Q2F8sJLZT4U?controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        <p style="text-align: left;padding: 0px 30px;"> The code in the ble_arduino is shown below:</p>
        <img src="pics/time.jpg"width="400">

        <h3>5. Notification Handler</h3>
             <p style="text-align: left;padding: 0px 30px;">  In this task, A notification handler is needed to receive the message from the Artemis board whenever the board sent the computer a new message. When a message is received, the handle_notification function is called to print the message. The result is show in the image below: </p>
        <p style="text-align: left;padding: 0px 30px;">The code snippet is shown below:</p>
        <img src="pics/notifi.jpg" width="400">

        <h3>6.GET_TIME_MILLIS</h3>
        <p style="text-align: left;padding: 0px 30px;">
          In this task, I implemented the command case GET_ TEMP_5s at the Artemis board side and used the notification handler nodtifi_handler2(uuid, s)  on  the computer end to receive the temperature sent by the Artemis board once per second for 5 s The result shown in the video below:
        </p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/I_5kDKISrgo?controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        <p style="text-align: left;padding: 0px 30px;">The code snippet for the Artiemis board is shown below:</p>
        <img src="pics/gettemp5s.jpg" width="400">

        <h3>7.GET_TIME_MILLIS_rapid</h3>
        <p style="text-align: left;padding: 0px 30px;">
          For the Get_Temp_5s_RAPID command , it is similar to the previous GET_Temp_5s. I set the interval of each loop to 100ms by using the delay() function, so that 5*1000/100 =50 samples can be generated in 5 second . The result is shown in the video below:
        </P>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/vh592JmJ3Lw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        <p style="text-align: left;padding: 0px 30px;">The code  for Get_Temp_5s_RAPID command is shown below:</p>
        <img src="pics/rapid.jpg" width="400">

        <h3>8.Limitations</h3>
        <p style="text-align: left;padding: 0px 30px;">The Artemis board has 384 kB of RAM, which can store 384,000 bytes of data. Since the data is sampled at 16 bits per sample, this means that the board can store 384,000 / 2 = 192,000 16-bit samples.

          If the data is sampled at 150 Hz, then each second of data requires 150 * 2 = 300 bytes of storage (since each sample is 16 bits, or 2 bytes). Therefore, the board can store 384,000 / 300 = 1280 seconds of data.

          If we want to store 5 seconds of data at a time, then we can store 1280 / 5 = 256 flows of data. Each flow would consist of 5 seconds of 16-bit values taken at 150 Hz.
        </p>

        <h3>9.Additional task 1</h3>
        <p style="text-align: left;padding: 0px 30px;">
          To calculate the data rate for different reply sizes, I set up a callback handler function called send_string(uuid,s), which will continuously return the data rate from 1Bytes to 140Bytes. The data rate is calculated by the function (length of message/(receiving_time- sending_time). Additionally, it will store data rates in a dictionary in every round. The code snippets are shown below:
        </p>
        <img src="pics/datarateboard.jpg" width="400">
        <img src="pics/dataratepy.jpg" width="400">
        <p  style="text-align: left;padding: 0px 30px;">
          After running the command, The data rates for the reply message size from 1-140 bytes are shown below:
        </p>
        <img src="pics/reslut.jpg" width="400">

        <p src="pics/datarateboard.jpg" width="400">
          Despite the fluctuations in the graph above, we can see an increasing trend as the size of the reply message load gets larger. Therefore, itâ€™s reasonable to conclude that the larger replies help to reduce the overhead and the short packets introduce a lot of overhead since the data rate is low.
        </p>

        <h3>9.Additional task 2</h3>
        <p>
          For the reliability test, I changed the data rate by changing the interval for delay function in the command function RELIBILITY. Because for smaller intervals, the data rate is higher,I set up the interval time to 1000 at the beginning and reduce 10 for every round. In the handler function, I record the reply message received by the computer and compare it with the sending message in the serial monitor. The result in the video below shows that no message dropped when the data rate is high, Therefore, the transmission is 100% reliable.
        </p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/cPvEPoRnV4g" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>




      </div>





      <!--    <hr id='drawings'>-->

<!--      <div style="text-align:center;">-->
<!--              <h2>Drawings</h2>-->
<!--              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>-->
<!--      </div>-->

<!--    <hr id='testing'>-->

<!--      <div style="text-align:center;">-->
<!--              <h2>Testing</h2>-->
<!--              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>-->
<!--      </div>-->

<!--    <hr id='result'>-->

<!--      <div style="text-align:center;">-->
<!--              <h2>Result</h2>-->
<!--              <p style="text-align: left;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>-->
<!--      </div>-->

<!--    <hr>-->

<!--    <div class="row" style="text-align:center;">-->
<!--          <h2>Work Distribution</h2>-->
<!--          <div style="text-align:center;">-->
<!--              <img class="img-rounded" src="pics/group.jpg" alt="Generic placeholder image" style="width:80%;">-->
<!--              <h4>Project group picture</h4>-->
<!--          </div>-->
<!--          <div class="col-md-6" style="font-size:16px">-->
<!--              <img class="img-rounded" src="pics/a.png" alt="Generic placeholder image" width="240" height="240">-->
<!--              <h3>Rick</h3>-->
<!--              <p class="lead">netid@cornell.edu</p>-->
<!--              <p>Designed the overall software architecture (Just being himself).-->
<!--          </div>-->
<!--          <div class="col-md-6" style="font-size:16px">-->
<!--              <img class="img-rounded" src="pics/b.png" alt="Generic placeholder image" width="240" height="240">-->
<!--              <h3>Morty</h3>-->
<!--              <p class="lead">netid@cornell.edu</p>-->
<!--              <p>Tested the overall system.-->
<!--          </div>-->
<!--      </div>-->

<!--    <hr>-->
<!--      <div style="font-size:18px">-->
<!--          <h2>Parts List</h2>-->
<!--          <ul>-->
<!--              <li>1 x SparkFun RedBoard Artemis Nano</li>-->
<!--              <li>1 x USB C-to-C</li>-->

<!--              <li>  Arduino IDE and Sparkfun Appollo3</li>-->
<!--          </ul>-->

<!--      </div>-->
<!--      <hr>-->
<!--      <div style="font-size:18px">-->
<!--          <h2>References</h2>-->
<!--          <a href="https://picamera.readthedocs.io/">PiCamera Document</a><br>-->
<!--          <a href="http://www.micropik.com/PDF/SG90Servo.pdf">Tower Pro Servo Datasheet</a><br>-->
<!--          <a href="http://getbootstrap.com/">Bootstrap</a><br>-->
<!--          <a href="http://abyz.co.uk/rpi/pigpio/">Pigpio Library</a><br>-->
<!--          <a href="https://sourceforge.net/p/raspberry-gpio-python/wiki/Home/">R-Pi GPIO Document</a><br>-->

<!--      </div>-->

<!--&lt;!&ndash;    <hr>&ndash;&gt;-->

<!--      <div class="row">-->
<!--              <h2>Code Appendix</h2>-->
<!--              <pre><code>-->
<!--/* Author: Nathan Seidle-->
<!--  Created: July 24, 2019-->

<!--  This example demonstrates how to use the pulse density microphone (PDM) on Artemis boards.-->
<!--  This library and example are heavily based on the Apollo3 pdm_fft example.-->
<!--*/-->

<!--/*-->
<!--// This file is subject to the terms and conditions defined in-->
<!--// file 'LICENSE.md', which is part of this source code package.-->
<!--*/-->

<!--//Global variables needed for PDM library-->
<!--#define pdmDataBufferSize 4096 //Default is array of 4096 * 32bit-->
<!--uint16_t pdmDataBuffer[pdmDataBufferSize];-->

<!--//Global variables needed for the FFT in this sketch-->
<!--float g_fPDMTimeDomain[pdmDataBufferSize * 2];-->
<!--float g_fPDMFrequencyDomain[pdmDataBufferSize * 2];-->
<!--float g_fPDMMagnitudes[pdmDataBufferSize * 2];-->
<!--uint32_t sampleFreq;-->

<!--//Enable these defines for additional debug printing-->
<!--#define PRINT_PDM_DATA 0-->
<!--#define PRINT_FFT_DATA 0-->

<!--#include <PDM.h> //Include PDM library included with the Aruino_Apollo3 core-->
<!--AP3_PDM myPDM;   //Create instance of PDM class-->

<!--//Math library needed for FFT-->
<!--#include <arm_math.h>-->

<!--void setup()-->
<!--{-->
<!--  Serial.begin(115200);-->
<!--  Serial.println("SparkFun PDM Example");-->

<!--  if (myPDM.begin() == false) // Turn on PDM with default settings, start interrupts-->
<!--  {-->
<!--    Serial.println("PDM Init failed. Are you sure these pins are PDM capable?");-->
<!--    while (1)-->
<!--      ;-->
<!--  }-->
<!--  Serial.println("PDM Initialized");-->

<!--  printPDMConfig();-->
<!--}-->

<!--void loop()-->
<!--{-->
<!--  if (myPDM.available())-->
<!--  {-->
<!--    myPDM.getData(pdmDataBuffer, pdmDataBufferSize);-->

<!--    printLoudest();-->
<!--  }-->

<!--  // Go to Deep Sleep until the PDM ISR or other ISR wakes us.-->
<!--  am_hal_sysctrl_sleep(AM_HAL_SYSCTRL_SLEEP_DEEP);-->
<!--}-->

<!--//*****************************************************************************-->
<!--//-->
<!--// Analyze and print frequency data.-->
<!--//-->
<!--//*****************************************************************************-->
<!--void printLoudest(void)-->
<!--{-->
<!--  float fMaxValue;-->
<!--  uint32_t ui32MaxIndex;-->
<!--  int16_t *pi16PDMData = (int16_t *)pdmDataBuffer;-->
<!--  uint32_t ui32LoudestFrequency;-->

<!--  //-->
<!--  // Convert the PDM samples to floats, and arrange them in the format-->
<!--  // required by the FFT function.-->
<!--  //-->
<!--  for (uint32_t i = 0; i < pdmDataBufferSize; i++)-->
<!--  {-->
<!--    if (PRINT_PDM_DATA)-->
<!--    {-->
<!--      Serial.printf("%d\n", pi16PDMData[i]);-->
<!--    }-->

<!--    g_fPDMTimeDomain[2 * i] = pi16PDMData[i] / 1.0;-->
<!--    g_fPDMTimeDomain[2 * i + 1] = 0.0;-->
<!--  }-->

<!--  if (PRINT_PDM_DATA)-->
<!--  {-->
<!--    Serial.printf("END\n");-->
<!--  }-->

<!--  //-->
<!--  // Perform the FFT.-->
<!--  //-->
<!--  arm_cfft_radix4_instance_f32 S;-->
<!--  arm_cfft_radix4_init_f32(&S, pdmDataBufferSize, 0, 1);-->
<!--  arm_cfft_radix4_f32(&S, g_fPDMTimeDomain);-->
<!--  arm_cmplx_mag_f32(g_fPDMTimeDomain, g_fPDMMagnitudes, pdmDataBufferSize);-->

<!--  if (PRINT_FFT_DATA)-->
<!--  {-->
<!--    for (uint32_t i = 0; i < pdmDataBufferSize / 2; i++)-->
<!--    {-->
<!--      Serial.printf("%f\n", g_fPDMMagnitudes[i]);-->
<!--    }-->

<!--    Serial.printf("END\n");-->
<!--  }-->

<!--  //-->
<!--  // Find the frequency bin with the largest magnitude.-->
<!--  //-->
<!--  arm_max_f32(g_fPDMMagnitudes, pdmDataBufferSize / 2, &fMaxValue, &ui32MaxIndex);-->

<!--  ui32LoudestFrequency = (sampleFreq * ui32MaxIndex) / pdmDataBufferSize;-->

<!--  if (PRINT_FFT_DATA)-->
<!--  {-->
<!--    Serial.printf("Loudest frequency bin: %d\n", ui32MaxIndex);-->
<!--  }-->

<!--  Serial.printf("Loudest frequency: %d         \n", ui32LoudestFrequency);-->


<!--       // turn the LED on (HIGH is the voltage level)-->

<!--  if (ui32LoudestFrequency>430 && ui32LoudestFrequency<445 )-->
<!--  {-->
<!--     digitalWrite(LED_BUILTIN, HIGH);-->
<!--  }else{-->
<!--    digitalWrite(LED_BUILTIN, LOW);-->
<!--  }-->


<!--}-->

<!--//*****************************************************************************-->
<!--//-->
<!--// Print PDM configuration data.-->
<!--//-->
<!--//*****************************************************************************-->
<!--void printPDMConfig(void)-->
<!--{-->
<!--  uint32_t PDMClk;-->
<!--  uint32_t MClkDiv;-->
<!--  float frequencyUnits;-->

<!--  //-->
<!--  // Read the config structure to figure out what our internal clock is set-->
<!--  // to.-->
<!--  //-->
<!--  switch (myPDM.getClockDivider())-->
<!--  {-->
<!--  case AM_HAL_PDM_MCLKDIV_4:-->
<!--    MClkDiv = 4;-->
<!--    break;-->
<!--  case AM_HAL_PDM_MCLKDIV_3:-->
<!--    MClkDiv = 3;-->
<!--    break;-->
<!--  case AM_HAL_PDM_MCLKDIV_2:-->
<!--    MClkDiv = 2;-->
<!--    break;-->
<!--  case AM_HAL_PDM_MCLKDIV_1:-->
<!--    MClkDiv = 1;-->
<!--    break;-->

<!--  default:-->
<!--    MClkDiv = 0;-->
<!--  }-->

<!--  switch (myPDM.getClockSpeed())-->
<!--  {-->
<!--  case AM_HAL_PDM_CLK_12MHZ:-->
<!--    PDMClk = 12000000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_6MHZ:-->
<!--    PDMClk = 6000000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_3MHZ:-->
<!--    PDMClk = 3000000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_1_5MHZ:-->
<!--    PDMClk = 1500000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_750KHZ:-->
<!--    PDMClk = 750000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_375KHZ:-->
<!--    PDMClk = 375000;-->
<!--    break;-->
<!--  case AM_HAL_PDM_CLK_187KHZ:-->
<!--    PDMClk = 187000;-->
<!--    break;-->

<!--  default:-->
<!--    PDMClk = 0;-->
<!--  }-->

<!--  //-->
<!--  // Record the effective sample frequency. We'll need it later to print the-->
<!--  // loudest frequency from the sample.-->
<!--  //-->
<!--  sampleFreq = (PDMClk / (MClkDiv * 2 * myPDM.getDecimationRate()));-->

<!--  frequencyUnits = (float)sampleFreq / (float)pdmDataBufferSize;-->

<!--  Serial.printf("Settings:\n");-->
<!--  Serial.printf("PDM Clock (Hz):         %12d\n", PDMClk);-->
<!--  Serial.printf("Decimation Rate:        %12d\n", myPDM.getDecimationRate());-->
<!--  Serial.printf("Effective Sample Freq.: %12d\n", sampleFreq);-->
<!--  Serial.printf("FFT Length:             %12d\n\n", pdmDataBufferSize);-->
<!--  Serial.printf("FFT Resolution: %15.3f Hz\n", frequencyUnits);-->
<!--}-->
<!--              </code></pre>-->
      </div>

    </div><!-- /.container -->




    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
  </body>
</html>
